data.port=read.table(file="C:/Users/TSR/Desktop/高統r/airports.dat",sep=",")
data.line=read.table(file="C:/Users/TSR/Desktop/高統r/routes .dat",sep=",")
library(stringr)
portinchina <- str_detect(data.port[,'V4'], "China")
chinaport <- data.port[portinchina,]
chinaport <-chinaport[chinaport$V5!='',
c('V3','V5','V7','V8','V9')]
names(chinaport) <- c('city','code','lan','lon','att')
lineinchina <- (data.line[,'V3'] %in% chinaport$code) & (data.line[,'V5'] %in% chinaport$code)
chinaline <- data.line[lineinchina,c('V3','V5','V9')]
names(chinaline) <- c('source','destination','equipment')
findposition <- function(code) {
find <- chinaport$code==code
x <- chinaport[find,'lon']
y <- chinaport[find,'lan']
return(data.frame(x,y))
}
View(chinaline)
View(chinaline)
which(is.na(chinaline))
edit(chinaline)
View(chinaline)
View(chinaline)
x=matrix(0,ncol=100,nrow=100)
x
edit(x)
View(x)
View(x)
edit(x)
View(x)
View(x)
edit(x)
View(x)
View(x)
as.table(x)
edit(x)
is(x)
x=as.table(x)
edit(x)
x
edit(x)
which(is.na(x))
View(data.port)
x
x[1,]
edit(x)
fix(x)
x
which(is.na(x))
fix(x)
fix(x)
x[1,2]="."
fix(x)
x=talbe(0,ncol=5,nrow=6)
x=data.frame(0,ncol=5,nrow=6)
x
x=matrix(0,ncol=4,nrow=6)
x=as.table(x)
x
x[2,4]="."
x
is.na(x)
x[2,3]=" "
x
is.na(x)
x[1,3]=NA
X
x
is.na
is.na(x)
x==""
x==" "
x=="."
which(x==".")
which(is.na(x))
x=c(3,6,7)
mod(x)
x%%2
x%/%2
p1=x%%2
p2=x%/%2
rbind(p1,p2)
testna=funtion(x){
p1=which(is.na(x))
p2=which(x==" ")
p3=which(x==".")
pp1=rbind(p1%/%nrow(x),p1%%nrow(x))
pp2=rbind(p2%/%nrow(x),p2%%nrow(x))
pp3=rbind(p3%/%nrow(x),p3%%nrow(x))
retrun(list(t(pp1),t(pp2),t(pp3)))
}
testna=funtion(x){
testna=function(x){
p1=which(is.na(x))
p2=which(x==" ")
p3=which(x==".")
pp1=rbind(p1%/%nrow(x),p1%%nrow(x))
pp2=rbind(p2%/%nrow(x),p2%%nrow(x))
pp3=rbind(p3%/%nrow(x),p3%%nrow(x))
retrun(list(t(pp1),t(pp2),t(pp3)))
}
x
testna(x)
testna=function(x){
p1=which(is.na(x))
p2=which(x==" ")
p3=which(x==".")
pp1=rbind(p1%/%nrow(x),p1%%nrow(x))
pp2=rbind(p2%/%nrow(x),p2%%nrow(x))
pp3=rbind(p3%/%nrow(x),p3%%nrow(x))
return(list(t(pp1),t(pp2),t(pp3)))
}
testna(x)
x=matrix(0,nrow=4,ncol=5)
x=as.tab1e(x)
x=as.frame(x)
x=as.dataframe(x)
x=as.tab1e(x)
x
x=as.table(x)
x
x[3,2]=" "
x[2,2]=na
x[2,2]=NA
x[4,5]="."
testna(x)
x[4,4]="."
testna(x)
x
testna=function(x){
p1=which(is.na(x))
p2=which(x==" ")
p3=which(x==".")
pp1=rbind(p1%/%nrow(x),p1%%nrow(x))
pp[pp[,2]==0,]=nrow(x)
pp2=rbind(p2%/%nrow(x),p2%%nrow(x))
pp3=rbind(p3%/%nrow(x),p3%%nrow(x))
return(list(t(pp1),t(pp2),t(pp3)))
}
testna(x)
testna=function(x){
p1=which(is.na(x))
p2=which(x==" ")
p3=which(x==".")
pp1=rbind(p1%/%nrow(x),p1%%nrow(x))
pp1[pp1[,2]==0,]=nrow(x)
pp2=rbind(p2%/%nrow(x),p2%%nrow(x))
pp3=rbind(p3%/%nrow(x),p3%%nrow(x))
return(list(t(pp1),t(pp2),t(pp3)))
}
testna(x)
testna=function(x){
p1=which(is.na(x))
p2=which(x==" ")
p3=which(x==".")
pp1=rbind(p1%/%nrow(x),p1%%nrow(x))
pp1[pp1[2,]==0,]=nrow(x)
pp2=rbind(p2%/%nrow(x),p2%%nrow(x))
pp3=rbind(p3%/%nrow(x),p3%%nrow(x))
return(list(t(pp1),t(pp2),t(pp3)))
}
testna(x)
}
testna=function(x){
p1=which(is.na(x))
p2=which(x==" ")
p3=which(x==".")
pp1=rbind(p1%/%nrow(x),p1%%nrow(x))
pp1[pp1[2,]==0,]=nrow(x)
pp2=rbind(p2%/%nrow(x),p2%%nrow(x))
pp2[pp2[2,]==0,]=nrow(x)
pp3=rbind(p3%/%nrow(x),p3%%nrow(x))
pp3[pp3[2,]==0,]=nrow(x)
return(list(t(pp1),t(pp2),t(pp3)))
}
testna(x)
x
testna=function(x){
p1=which(is.na(x))
p2=which(x==" ")
p3=which(x==".")
pp1=rbind(p1%/%nrow(x)+1,p1%%nrow(x))
pp1[pp1[2,]==0,]=nrow(x)
pp2=rbind(p2%/%nrow(x)+1,p2%%nrow(x))
pp2[pp2[2,]==0,]=nrow(x)
pp3=rbind(p3%/%nrow(x)+1,p3%%nrow(x))
pp3[pp3[2,]==0,]=nrow(x)
return(list(t(pp1),t(pp2),t(pp3)))
}
testna(x)
testna=function(x){
p1=which(is.na(x))
p2=which(x==" ")
p3=which(x==".")
pp1=rbind(p1%%nrow(x),p1%/%nrow(x)+1)
pp1[2,pp1[2,]==0]=nrow(x)
pp2=rbind(p2%%nrow(x),p2%/%nrow(x)+1)
pp2[2,pp2[2,]==0]=nrow(x)
pp3=rbind(p3%%nrow(x),p3%/%nrow(x)+1)
pp3[2,pp3[2,]==0]=nrow(x)
return(list(t(pp1),t(pp2),t(pp3)))
}
testna(x)
x
testna=function(x){
p1=which(is.na(x))
p2=which(x==" ")
p3=which(x==".")
pp1=rbind(p1%%nrow(x),p1%/%nrow(x)+1)
pp1[pp1[2,]==0,2]=nrow(x)
pp2=rbind(p2%%nrow(x),p2%/%nrow(x)+1)
pp2[pp2[2,]==0,2]=nrow(x)
pp3=rbind(p3%%nrow(x),p3%/%nrow(x)+1)
pp3[pp3[2,]==0,2]=nrow(x)
return(list(t(pp1),t(pp2),t(pp3)))
}
testna(x)
5%/%2
testna=function(x){
p1=which(is.na(x))
p2=which(x==" ")
p3=which(x==".")
pp1=rbind(p1%%nrow(x),p1%/%nrow(x)+1)
pp1[which(pp1[2,])==0,2]=nrow(x)
pp2=rbind(p2%%nrow(x),p2%/%nrow(x)+1)
pp2[which(pp2[2,])==0,2]=nrow(x)
pp3=rbind(p3%%nrow(x),p3%/%nrow(x)+1)
pp3[which(pp3[2,])==0,2]=nrow(x)
return(list(t(pp1),t(pp2),t(pp3)))
}
testna(x)
x=c(1,2,3)
y=c(2,3,4)
rbind(x,y)
testna=function(x){
p1=which(is.na(x))
p2=which(x==" ")
p3=which(x==".")
pp1=rbind(p1%%nrow(x),p1%/%nrow(x)+1)
pp1[2,which(pp1[2,])==0]=nrow(x)
pp2=rbind(p2%%nrow(x),p2%/%nrow(x)+1)
pp2[2,which(pp2[2,])==0]=nrow(x)
pp3=rbind(p3%%nrow(x),p3%/%nrow(x)+1)
pp3[2,which(pp3[2,])==0]=nrow(x)
return(list(t(pp1),t(pp2),t(pp3)))
}
testna(x)
testna=function(x){
p1=which(is.na(x))
p2=which(x==" ")
p3=which(x==".")
pp1=rbind(p1%%nrow(x),p1%/%nrow(x)+1)
pp1[2,which(pp1[2,]==0)]=nrow(x)
pp2=rbind(p2%%nrow(x),p2%/%nrow(x)+1)
pp2[2,which(pp2[2,]==0)]=nrow(x)
pp3=rbind(p3%%nrow(x),p3%/%nrow(x)+1)
pp3[2,which(pp3[2,]==0)]=nrow(x)
return(list(t(pp1),t(pp2),t(pp3)))
}
testna(x)
x=matrix(0,ncol=4,rrow=6)
x=matrix(0,ncol=4,nrow=6)
x=as.table(x)
x[3,4]=" "
x[6,4]="."
testna(x)
x
testna=function(x){
p1=which(is.na(x))
p2=which(x==" ")
p3=which(x==".")
pp1=rbind(p1%%nrow(x),p1%/%nrow(x)+1)
pp1[2,which(pp1[2,]==0)]=nrow(x)
pp2=rbind(p2%%nrow(x),p2%/%nrow(x)+1)
pp2[2,which(pp2[2,]==0)]=nrow(x)
pp3=rbind(p3%%nrow(x),(p3%/%nrow(x))+1)
pp3[2,which(pp3[2,]==0)]=nrow(x)
return(list(t(pp1),t(pp2),t(pp3)))
}
testna(x)
testna=function(x){
p1=which(is.na(x))
p2=which(x==" ")
p3=which(x==".")
pp1=rbind(p1%%nrow(x),p1%/%nrow(x)+1)
pp1[1,which(pp1[1,]==0)]=nrow(x)
pp2=rbind(p2%%nrow(x),p2%/%nrow(x)+1)
pp2[1,which(pp2[1,]==0)]=nrow(x)
pp3=rbind(p3%%nrow(x),(p3%/%nrow(x))+1)
pp3[1,which(pp3[1,]==0)]=nrow(x)
return(list(t(pp1),t(pp2),t(pp3)))
}
testna(x)
x
testna=function(x){
p1=which(is.na(x))
p2=which(x==" ")
p3=which(x==".")
pp1=rbind(p1%%nrow(x),p1%/%nrow(x)+1)
pp1[1,which(pp1[1,]==0)]=nrow(x)
pp2=rbind(p2%%nrow(x),p2%/%nrow(x)+1)
pp2[1,which(pp2[1,]==0)]=nrow(x)
pp3=rbind(p3%%nrow(x),p3%/%nrow(x)+1)
pp3[1,which(pp3[1,]==0)]=nrow(x)
return(list(t(pp1),t(pp2),t(pp3)))
}
testna(x)
x
testna=function(x){
p1=which(is.na(x))
p2=which(x==" ")
p3=which(x==".")
pp1=rbind(p1%%nrow(x),p1%/%nrow(x)+1)
pp1[1,which(pp1[1,]==0)]=nrow(x)
pp1[2,which(pp1[1,]==0)]=pp1[2,which(pp1[1,]==0)]-1
pp2=rbind(p2%%nrow(x),p2%/%nrow(x)+1)
pp2[1,which(pp2[1,]==0)]=nrow(x)
pp2[2,which(pp2[1,]==0)]=pp2[2,which(pp2[1,]==0)]-1
pp3=rbind(p3%%nrow(x),p3%/%nrow(x)+1)
pp3[1,which(pp3[1,]==0)]=nrow(x)
pp3[2,which(pp3[1,]==0)]=pp3[2,which(pp3[1,]==0)]-1
return(list(t(pp1),t(pp2),t(pp3)))
}
testna(x)
x
x[6,2]="."
testna(x)
x
testna=function(x){
p1=which(is.na(x))
p2=which(x==" ")
p3=which(x==".")
pp1=rbind(p1%%nrow(x),p1%/%nrow(x)+1)
pp1[2,which(pp1[1,]==0)]=pp1[2,which(pp1[1,]==0)]-1
pp1[1,which(pp1[1,]==0)]=nrow(x)
pp2=rbind(p2%%nrow(x),p2%/%nrow(x)+1)
pp2[2,which(pp2[1,]==0)]=pp2[2,which(pp2[1,]==0)]-1
pp2[1,which(pp2[1,]==0)]=nrow(x)
pp3=rbind(p3%%nrow(x),p3%/%nrow(x)+1)
pp3[2,which(pp3[1,]==0)]=pp3[2,which(pp3[1,]==0)]-1
pp3[1,which(pp3[1,]==0)]=nrow(x)
return(list(t(pp1),t(pp2),t(pp3)))
}
testna(x)
x
testna=function(x){
p1=which(is.na(x))
p2=which(x==" ")
p3=which(x==".")
pp1=rbind(p1%%nrow(x),p1%/%nrow(x)+1)
pp1[2,which(pp1[1,]==0)]=pp1[2,which(pp1[1,]==0)]-1
pp1[1,which(pp1[1,]==0)]=nrow(x)
colnames(pp1)=x("x","y")
pp2=rbind(p2%%nrow(x),p2%/%nrow(x)+1)
pp2[2,which(pp2[1,]==0)]=pp2[2,which(pp2[1,]==0)]-1
pp2[1,which(pp2[1,]==0)]=nrow(x)
colnames(pp2)=x("x","y")
pp3=rbind(p3%%nrow(x),p3%/%nrow(x)+1)
pp3[2,which(pp3[1,]==0)]=pp3[2,which(pp3[1,]==0)]-1
pp3[1,which(pp3[1,]==0)]=nrow(x)
colnames(pp3)=x("x","y")
return(list(t(pp1),t(pp2),t(pp3)))
}
testna(x)
y=c(0,0,0)
testna(y)
testna=function(x){
p1=which(is.na(x))
p2=which(x==" ")
p3=which(x==".")
pp1=rbind(p1%%nrow(x),p1%/%nrow(x)+1)
pp1[2,which(pp1[1,]==0)]=pp1[2,which(pp1[1,]==0)]-1
pp1[1,which(pp1[1,]==0)]=nrow(x)
colnames(pp1)=c("x","y")
pp2=rbind(p2%%nrow(x),p2%/%nrow(x)+1)
pp2[2,which(pp2[1,]==0)]=pp2[2,which(pp2[1,]==0)]-1
pp2[1,which(pp2[1,]==0)]=nrow(x)
colnames(pp2)=c("x","y")
pp3=rbind(p3%%nrow(x),p3%/%nrow(x)+1)
pp3[2,which(pp3[1,]==0)]=pp3[2,which(pp3[1,]==0)]-1
pp3[1,which(pp3[1,]==0)]=nrow(x)
colnames(pp3)=c("x","y")
return(list(t(pp1),t(pp2),t(pp3)))
}
testna(y)
testna(x)
testna=function(x){
p1=which(is.na(x))
p2=which(x==" ")
p3=which(x==".")
pp1=rbind(p1%%nrow(x),p1%/%nrow(x)+1)
pp1[2,which(pp1[1,]==0)]=pp1[2,which(pp1[1,]==0)]-1
pp1[1,which(pp1[1,]==0)]=nrow(x)
pp1=t(pp1)
colnames(pp1)=c("x","y")
pp2=rbind(p2%%nrow(x),p2%/%nrow(x)+1)
pp2[2,which(pp2[1,]==0)]=pp2[2,which(pp2[1,]==0)]-1
pp2[1,which(pp2[1,]==0)]=nrow(x)
pp2=t(pp2)
colnames(pp2)=c("x","y")
pp3=rbind(p3%%nrow(x),p3%/%nrow(x)+1)
pp3[2,which(pp3[1,]==0)]=pp3[2,which(pp3[1,]==0)]-1
pp3[1,which(pp3[1,]==0)]=nrow(x)
pp3=t(pp3)
colnames(pp3)=c("x","y")
return(list(pp1,pp2,pp3))
}
testna(x)
testna(y)
testna(y)[1]
testna(y)[1]==NA
testna(y)[1]
testna(x)
is.na(testna(x)[1])
testna(x)[1]==" "
testna(x)[1]==""
testna(x)[1]=="."
?source
library(ggmap)
data.port=read.table(file="C:/Users/TSR/Desktop/高統r/airports.dat",sep=",")
data.line=read.table(file="C:/Users/TSR/Desktop/高統r/routes .dat",sep=",")
library(stringr)
portintw <- str_detect(data.port[,'V4'], "Taiwan")
twport <- data.port[portintw,]
data.port= data.port[,c('V3','V5','V7','V8','V9')]
names(data.port) <- c('city','code','lan','lon','att')
twport <-twport[twport$V5!='',
c('V3','V5','V7','V8','V9')]
names(twport) <- c('city','code','lan','lon','att')
lineintw <- data.line[,'V3'] %in% twport$code
twline <- data.line[lineintw,c('V3','V5','V9')]
outport=data.port[data.port$code  %in% twline[,"V5"],]
names(twline) <- c('source','destination','equipment')
findposition <- function(code) {
find <- twport$code==code
x <- twport[find,'lon']
y <- twport[find,'lan']
return(data.frame(x,y))
}
too <- function(code) {
find <- data.port$code==code
x <- data.port[find,'lon']
y <- data.port[find,'lan']
return(data.frame(x,y))
}
from <- lapply(as.character(twline$source),findposition)
from <- do.call('rbind',from)
from$group <- 1:dim(from)[1]
names(from) <- c('lon','lan','group')
to <- lapply(as.character(twline$destination),too)
to <- do.call('rbind',to)
to$group <-1:dim(to)[1]
names(to) <-c('lon','lan','group')
data.line <- rbind(from,to)
ggmap(get_googlemap(center = 'taiwan', zoom=3,size=c(1800,1200),
maptype='roadmap'),extent='device')+
geom_point(data=twport,aes(x=lon,y=lan),
colour = 'red4',alpha=0.8)+
geom_point(data=outport,aes(x=lon,y=lan),
colour = 'red4',alpha=0.8)+
geom_line(data=data.line,aes(x=lon,y=lan,group=group),
size=0.1,alpha=1,color='red4')
